{% extends "core/base.html" %}
{% load static i18n %}
{% block content %}
    <div class="auth-page-shell">
        <div class="container px-2 px-md-4 px-lg-5 my-0">
            <div class="row g-4 justify-content-center">
                <div class="col-lg-9">
                    <div class="card auth-card shadow-sm overflow-hidden border-0">
                        <div class="row g-0 align-items-stretch">
                            <div class="col-md-5 auth-hero d-flex flex-column justify-content-between p-4 p-md-5">
                                <div>
                                    <p class="text-uppercase text-white-50 small mb-2">{% trans "Welcome back" %}</p>
                                    <h2 class="h4 fw-semibold text-white mb-3">{% trans "Keep your shared finances moving" %}</h2>
                                    <p class="text-white-50 mb-0">
                                        {% blocktrans %}Stay in the flow: avoid surprising logouts and finish your next journal in one session.{% endblocktrans %}
                                    </p>
                                </div>
                                <div class="mt-4">
                                    <a class="btn btn-light btn-sm fw-semibold hero-cta htmx-a w-100 text-center text-primary"
                                       hx-get="{% url 'account:register' %}"
                                       hx-target="#body"
                                       hx-indicator="#body-loading-spinner"
                                       hx-swap="morph:innerHTML"
                                       hx-push-url="true">{% trans "Create an account" %}</a>
                                </div>
                            </div>
                            <div class="col-md-7 bg-body">
                                <form hx-post="{% url 'account:login' %}"
                                      hx-target="#body"
                                      hx-indicator="#body-loading-spinner"
                                      hx-swap="morph:innerHTML"
                                      hx-push-url="true"
                                      class="auth-form p-4 p-md-5 d-flex flex-column justify-content-between">
                                    {% csrf_token %}
                                    <div>
                                        <div class="mb-4">
                                            <p class="text-muted small mb-1">{% trans "Secure login" %}</p>
                                            <h1 class="h3 fw-semibold mb-0">{% trans "Login" %}</h1>
                                        </div>
                                        {% if errors and errors.auth_failed %}
                                            <div class="alert alert-danger small mb-3" role="alert">{{ errors.auth_failed }}</div>
                                        {% endif %}
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.email.id_for_label }}">{% trans "Email address" %}</label>
                                            {{ form.email }}
                                            {% for error in form.email.errors %}<small class="text-danger d-block mt-1">{{ error }}</small>{% endfor %}
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="{{ form.password.id_for_label }}">{% trans "Password" %}</label>
                                            {{ form.password }}
                                            {% for error in form.password.errors %}<small class="text-danger d-block mt-1">{{ error }}</small>{% endfor %}
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
                                            <div class="form-check">
                                                {{ form.remember_me }}
                                                <label class="form-check-label fw-semibold" for="rememberMe">{% trans "Stay signed in for 30 days" %}</label>
                                                <p class="text-muted small mb-0 mt-1">
                                                    {% blocktrans %}Active requests keep your session fresh for the configured window (48 hours by default or 30 days when "Stay signed in" is checked).{% endblocktrans %}
                                                </p>
                                            </div>
                                            <small class="text-muted">
                                                <a class="htmx-a text-decoration-none"
                                                   hx-get="{% url 'account:forgot-password' %}"
                                                   hx-target="#body"
                                                   hx-indicator="#body-loading-spinner"
                                                   hx-swap="morph:innerHTML"
                                                   hx-push-url="true">{% trans "Forgot password?" %}</a>
                                            </small>
                                        </div>
                                    </div>
                                    <div>
                                        <button type="submit" class="btn btn-primary w-100 fw-semibold py-2">{% trans "Log in" %}</button>
                                        <p class="mt-3 small text-muted">
                                            {% blocktrans %}We automatically renew the cookie whenever you stay active so only real inactivity (more than the configured window) forces a re-login, while the "Stay signed in" path still lets the 30-day TTL slide.{% endblocktrans %}
                                        </p>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
